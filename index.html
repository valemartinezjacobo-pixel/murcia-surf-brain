<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8" />
    <title>Murcia Surf Brain</title>
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <style>
    :root {
        --bg: #020817;
        --bg-alt: #04101f;
        --primary: #00c2ff;
        --accent: #ff7a3c;
        --good: #32d399;
        --regular: #ffcc33;
        --bad: #ff4b5c;
        --text: #e5f1fb;
        --muted: #90a4c4;
        --card: #050f20;
        --border: #123055;
        --shadow: 0 18px 40px rgba(0, 0, 0, 0.6);
    }

    * { box-sizing: border-box; margin: 0; padding: 0; }

    body {
        font-family: system-ui, -apple-system, BlinkMacSystemFont, "SF Pro Text", "Segoe UI", sans-serif;
        background: radial-gradient(circle at top, #052041 0, #020817 45%, #01040b 100%);
        color: var(--text);
        min-height: 100vh;
        display: flex;
        align-items: stretch;
        justify-content: center;
    }

    .ocean-bg {
        position: fixed;
        inset: 0;
        pointer-events: none;
        overflow: hidden;
        z-index: -1;
    }

    .ocean-wave {
        position: absolute;
        width: 200%;
        height: 200%;
        background:
            radial-gradient(circle at 20% 20%, rgba(0, 194, 255, 0.12) 0, transparent 50%),
            radial-gradient(circle at 80% 0%, rgba(0, 255, 213, 0.08) 0, transparent 55%),
            radial-gradient(circle at 50% 80%, rgba(0, 157, 255, 0.15) 0, transparent 55%);
        animation: drift 30s linear infinite;
        opacity: 0.65;
    }

    @keyframes drift {
        from { transform: translate(-25%, -25%) rotate(0deg); }
        to { transform: translate(-25%, -25%) rotate(360deg); }
    }

    .container {
        width: 100%;
        max-width: 1400px;
        padding: 2rem;
        position: relative;
        z-index: 1;
    }

    header {
        text-align: center;
        margin-bottom: 3rem;
    }

    h1 {
        font-size: 3rem;
        font-weight: 700;
        background: linear-gradient(135deg, var(--primary), var(--accent));
        -webkit-background-clip: text;
        -webkit-text-fill-color: transparent;
        background-clip: text;
        margin-bottom: 0.5rem;
    }

    .subtitle {
        color: var(--muted);
        font-size: 1.1rem;
    }

    .best-spot {
        background: var(--card);
        border: 2px solid var(--primary);
        border-radius: 20px;
        padding: 2rem;
        margin-bottom: 2rem;
        box-shadow: var(--shadow);
        text-align: center;
    }

    .best-spot h2 {
        font-size: 1.5rem;
        margin-bottom: 0.5rem;
        color: var(--primary);
    }

    .best-spot .spot-name {
        font-size: 2rem;
        font-weight: 700;
        margin: 1rem 0;
    }

    .score {
        display: inline-block;
        font-size: 2.5rem;
        font-weight: 900;
        padding: 0.5rem 1.5rem;
        border-radius: 12px;
        background: linear-gradient(135deg, var(--good), #20b888);
        color: #000;
    }

    .spots-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(320px, 1fr));
        gap: 1.5rem;
        margin-bottom: 2rem;
    }

    .spot-card {
        background: var(--card);
        border: 1px solid var(--border);
        border-radius: 16px;
        padding: 1.5rem;
        box-shadow: var(--shadow);
        transition: transform 0.2s, box-shadow 0.2s;
    }

    .spot-card:hover {
        transform: translateY(-4px);
        box-shadow: 0 24px 50px rgba(0, 0, 0, 0.7);
    }

    .spot-card h3 {
        font-size: 1.3rem;
        margin-bottom: 1rem;
        color: var(--primary);
    }

    .spot-score {
        font-size: 2rem;
        font-weight: 900;
        margin-bottom: 1rem;
        padding: 0.3rem 1rem;
        border-radius: 8px;
        display: inline-block;
    }

    .score-good { background: var(--good); color: #000; }
    .score-regular { background: var(--regular); color: #000; }
    .score-bad { background: var(--bad); color: #fff; }

    .data-row {
        display: flex;
        justify-content: space-between;
        padding: 0.5rem 0;
        border-bottom: 1px solid var(--border);
    }

    .data-row:last-child {
        border-bottom: none;
    }

    .data-label {
        color: var(--muted);
        font-size: 0.9rem;
    }

    .data-value {
        font-weight: 600;
        color: var(--text);
    }

    .refresh-info {
        text-align: center;
        color: var(--muted);
        font-size: 0.9rem;
        padding: 1rem;
    }

    .loading {
        text-align: center;
        padding: 3rem;
        font-size: 1.2rem;
        color: var(--primary);
    }

    @keyframes pulse {
        0%, 100% { opacity: 1; }
        50% { opacity: 0.5; }
    }

    .loading {
        animation: pulse 1.5s ease-in-out infinite;
    }

    @media (max-width: 768px) {
        h1 { font-size: 2rem; }
        .container { padding: 1rem; }
        .spots-grid { grid-template-columns: 1fr; }
    }
    </style>
</head>
<body>
    <div class="ocean-bg">
        <div class="ocean-wave"></div>
    </div>

    <div class="container">
        <header>
            <h1>üèÑ‚Äç‚ôÇÔ∏è Murcia Surf Brain</h1>
            <p class="subtitle">Predicci√≥n en tiempo real de las mejores condiciones de surf en Murcia</p>
        </header>

        <div id="app">
            <div class="loading">Cargando datos de surf...</div>
        </div>

        <div class="refresh-info">
            Actualizado: <span id="lastUpdate">--</span> | Pr√≥xima actualizaci√≥n en 30 min
        </div>
    </div>

    <script>
    const beaches = [
        { name: 'Playa de Salinas', lat: 37.697, lon: -0.849, region: 'Calblanque' },
        { name: 'Calamagre', lat: 37.682, lon: -0.827, region: 'Calblanque' },
        { name: 'Negrete', lat: 37.673, lon: -0.819, region: 'Calblanque' },
        { name: 'Playa del Lastre', lat: 37.598, lon: -0.868, region: 'Portm√°n' },
        { name: 'Playa del Gorguel', lat: 37.577, lon: -0.887, region: 'La Uni√≥n' },
        { name: 'Playa de Gal√∫a', lat: 37.627, lon: -0.758, region: 'La Manga' },
        { name: 'La Raja', lat: 37.635, lon: -0.744, region: 'La Manga' },
        { name: 'Amoladeras', lat: 37.643, lon: -0.736, region: 'La Manga' }
    ];

    async function fetchWeatherData(lat, lon) {
        try {
            const url = `https://marine-api.open-meteo.com/v1/marine?latitude=${lat}&longitude=${lon}&current=wave_height,wave_direction,wave_period,wind_wave_height,wind_wave_direction,wind_wave_period&hourly=wave_height,wave_direction,wave_period&timezone=Europe/Madrid`;            const response = await fetch(url);
            return await response.json();
        } catch (error) {
            console.error('Error fetching weather:', error);
            return null;
        }
    }

    function calculateSurfScore(data) {
        if (!data || !data.current) return 0;        
        const windSpeed = data.current.wind_speed_10m || 0;
                const waveHeight = data.current.wave_height || 0;
        const wavePeriod = data.current.wave_period || 0;
        
        let score = 0;
        
        if (waveHeight >= 0.8 && waveHeight <= 2.5) score += 40;
        else if (waveHeight > 0.5) score += 20;
        
        if (wavePeriod >= 8) score += 30;
        else if (wavePeriod >= 6) score += 15;
        
        if (windSpeed <= 15) score += 30;
        else if (windSpeed <= 25) score += 15;
        
        return Math.min(score, 100);
    }

    function getScoreClass(score) {
        if (score >= 70) return 'score-good';
        if (score >= 40) return 'score-regular';
        return 'score-bad';
    }

    function getScoreText(score) {
        if (score >= 70) return 'Excelente';
        if (score >= 40) return 'Aceptable';
        return 'Pobre';
    }

    async function updateSurfData() {
        const app = document.getElementById('app');
        app.innerHTML = '<div class="loading">Cargando datos...</div>';
        
        const results = [];
        
        for (const beach of beaches) {
            const data = await fetchWeatherData(beach.lat, beach.lon);
            const score = calculateSurfScore(data);
            
            results.push({
                beach,
                data,
                score,
                                waveHeight: data?.current?.wave_height || 0,
                wavePeriod: data?.current?.wave_period || 0,
                                windSpeed: data?.current?.wind_speed_10m || 0,
                                windDir: data?.current?.wind_direction_10m || 0
            });
        results.sort((a, b) => b.score - a.score);
                    const best = results[0];
        
        let html = `
            <div class="best-spot">
                <h2>üåä Mejor Spot Ahora</h2>
                <div class="spot-name">${best.beach.name}</div>
                <div class="score">${best.score}/100</div>
                <p style="margin-top: 1rem; color: var(--muted);">${best.beach.region}</p>
            </div>
            
            <div class="spots-grid">
        `;
        
        for (const result of results) {
            html += `
                <div class="spot-card">
                    <h3>${result.beach.name}</h3>
                    <div class="spot-score ${getScoreClass(result.score)}">
                        ${result.score}/100
                    </div>
                    <div style="margin: 1rem 0; color: var(--muted); font-size: 0.9rem;">
                        ${getScoreText(result.score)}
                    </div>
                    <div class="data-row">
                        <span class="data-label">Altura olas</span>
                        <span class="data-value">${result.waveHeight.toFixed(1)} m</span>
                    </div>
                    <div class="data-row">
                        <span class="data-label">Periodo</span>
                        <span class="data-value">${result.wavePeriod.toFixed(0)} s</span>
                    </div>
                    <div class="data-row">
                        <span class="data-label">Viento</span>
                        <span class="data-value">${result.windSpeed.toFixed(0)} km/h</span>
                    </div>
                    <div class="data-row">
                        <span class="data-label">Direcci√≥n viento</span>
                        <span class="data-value">${result.windDir.toFixed(0)}¬∞</span>
                    </div>
                </div>
            `;
        }
        
        html += '</div>';
        app.innerHTML = html;
        
        document.getElementById('lastUpdate').textContent = new Date().toLocaleTimeString('es-ES');
    }

    updateSurfData();
    setInterval(updateSurfData, 30 * 60 * 1000);
    </script>
</body>
</html>
